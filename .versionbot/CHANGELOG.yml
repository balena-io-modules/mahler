- commits:
    - subject: Rename mermaid build method to `render`
      hash: 94514bc4a095f24f716936e5c91d1adaacad3ae4
      body: ""
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Remove title as a mermaid graph argument
      hash: 95be926b00f11cf412830799d7f2bd0218ed2548
      body: |
        Mermaid titles don't seem like a well supported feature, they cannot be
        styled and the default style does not match the rest of the diagram.
        Users of the mermaid helper can add their own if they chose.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Fix bug when diagraming nested method calls
      hash: becb91b1f8692faf471119a090d3e889af627c71
      body: |
        Nested methods would only get drawn correctly if no actions preceeded
        the method call. If a previous action had been chosen in the plan, the
        parents would get chosen incorrectly.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.20.0
  title: ""
  date: 2023-09-30T21:38:57.076Z
- commits:
    - subject: Fix Node ids in Mermaid test suite
      hash: 816f71e900536cdfbda9fcf12c2e0de9da30ebe6
      body: |
        Changing the task definition also changed the Ids defined for tasks,
        thus breaking Mermaid tests. This fixes the test suite
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Modify Action definition to return an Effect
      hash: 4337c6cfff8343d6737f12453c9dd29205aa55f7
      body: |
        Actions obtained from primitive tasks now return an Effect by default,
        making them both awaitable and observable. This change is compatible
        with the existing API
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Create the `Effect` type
      hash: 61c4519766c58c333b2594b71c72e876c6284abd
      body: |
        The `Effect` type is a mix between a promise, a function and an
        observable. It provides a way to combine an async computation with a
        sync version which "simulates" the effect that the async computation
        will have on the underlying system. These types are also composable via
        `map` and `flatMap`, which would allow building more complex effects
        from simpler ones, however this is outside the scope of the current PR
        (see PR #33 for a use of those ideas).
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Improve Observable API.
      hash: ca7f83fd86e3771f5dba9d1a93629b28bdfc4094
      body: |
        Observables now are composable via `map` and `flatMap`, they can also
        now accept async iterators as input, which should simplify the way
        sensors and action observables are defined.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Remove .eslintrc.json
      hash: b311caa0529682eee90691307249a38eddd0d3eb
      body: |
        This is unrelated to the PR but the eslint LSP is buggy and slows down
        my editor.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.19.0
  title: ""
  date: 2023-09-30T03:17:44.474Z
- commits:
    - subject: Add local prettierrc/eslintrc for editor compat
      hash: a4d5ea1acf684e897ce0716bc3e8e43bfb5f50ac
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.18.2
  title: ""
  date: 2023-09-15T18:53:14.389Z
- commits:
    - subject: Update to @balena/lint v7
      hash: a2f119597a592e7ae27415ada9ef49fbc852d565
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.18.1
  title: ""
  date: 2023-09-11T13:36:55.494Z
- commits:
    - subject: Remove parallel tasks
      hash: 722f5c21812df62f079216a485f7bdd83b59241d
      body: |
        With this change, all methods are assumed to be parallel by default
        unless conflicts are detected on the parallel branches, in which case
        the planner will switch to sequential operation.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Improve testing tools to work with parallel plans
      hash: 6fff8a1cdf043c9be9ffadbab8d419b960310851
      body: |
        This improves the API of the plan builder to be simpler and less
        confusing. The `end` method of the builder now returns a string.
        The `simplified` method has been renamed to `stringify` and now returns
        a string instead of an array. This should make it easier to visually
        inspect differences betwen the expected and the generated plan
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Fix wrong assumption about action nodes in mermaid
      hash: 76c027c0486682f2a80c70f6df1c1b4d4d787f1c
      body: |
        Diagram would break in the case of parallel tasks with conflicts, this
        is because an action may be chosen again after a previous compound task
        was chosen, which means an action in the decision tree may have multiple
        parents. We were assuming that an action could only have a single parent
        which would mess up the diagram
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Update diagramming feature to work with parallel tasks
      hash: 2952b53b42605f6b616948312d190fd5adc1e351
      body: |
        This adds a new state to the trace diagram (`found`). The state is on
        the last level search when no more operations are pending. This allows
        the digramming tool to draw joining paths by using the metadata in the
        trace.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Implement planning for parallel tasks
      hash: 60c2dd14cce295dcf1628fa367ee55ca4f12552a
      body: |
        WIP
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Convert Plan from a Linked List to a DAG
      hash: ab14029f224cc2a118629a5e55b774e887cecf49
      body: |
        Plan nodes can now be of three types, a regular action node (same as
        before), a fork node, creating branching on the plan, and an empty node,
        to indicate joining of previously created branches. This commit also
        updates all existing functions to deal with this new plan format, even
        though the planner still cannot generate these types of plans
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Refactor @mahler/testing sub-module
      hash: 4361c94d211086117f20598ebd8f4309c032bb32
      body: |
        This breaks up index into multiple files to simplify the move to
        a DAG representation of a plan.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Add Parallel task support.
      hash: 427ca3c1a12979123148e525d024aedda0bfc02b
      body: |
        Parallel tasks are the complement of Method tasks. While a method
        returns a list of instructions to be executed in sequence, a parallel
        task returns a list of instructions to be executed in parallel. When a
        parallel task is found, the planner will create a 'fork' in the plan,
        where sub-plans are executed in concurrent executions.

        While actions may now be executed in parallel, the state object is still
        shared, so this PR also provides utilities for conflict detection during
        testing.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.18.0
  title: ""
  date: 2023-09-06T23:51:12.199Z
- commits:
    - subject: Fix bug with Context type inference
      hash: 9f3ad1eba9cfe80fa22a45239180d01e96c90dcb
      body: |
        Type inference for the task Context was not working properly when the
        base object was a simple dictionary. This was due to a validation for
        empty string that was never triggered.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.17.2
  title: ""
  date: 2023-08-11T19:30:06.447Z
- commits:
    - subject: Move the method expansion check to findPlan
      hash: b28963c8a7995752c83bbbd4898a10cbe0f237b6
      body: |
        A method could be expanded to a an action and further methods, before if
        one of the sub-method calls returned an empty array, that would cause
        the parent method to fail. Now we only consider the method failed if one
        of the expansion conditions failed or the method after the expansion is
        finshed, didn't add any new actions to the plan.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.17.1
  title: ""
  date: 2023-08-10T16:02:50.690Z
- commits:
    - subject: Ensure task ids are deterministic
      hash: 651315f202e815f3f6a3a2b02d903327d0ab3ff3
      body: >
        Generate the task id from the task specification, including function

        bodies (they were randomly generated previously). This will be useful

        to automatically generate plan diagrams during testing without files changing

        on each commit.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.17.0
  title: ""
  date: 2023-08-10T01:12:52.264Z
- commits:
    - subject: Add test utility to generate mermaid graph
      hash: fc67ba30a05849acc3a7254a4f74dff15f5d72b7
      body: |
        This allows to visualize the planning process as a decision tree
        for debugging.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Simplify findPlan arguments
      hash: 8e31e02048d2f6647b340d93f95f3a1754dd4dd4
      body: |
        This also fixes a bug where actions expanded from a method
        would get repeated ids
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.16.2
  title: ""
  date: 2023-08-10T00:49:27.223Z
- commits:
    - subject: Use only relevant state for Node id generation
      hash: a88049cc0c77ff72399521ea20d018b4198c3c46
      body: |
        The state object may be pretty large, which means state changes may be
        common. Before this change, the Node ID would be calculated using the
        full state object, increasing the chances of false negative loop
        detection. This updates id calculation to only consider the part of the
        state relevant to the action (given by the action path), which should
        improve loop detection behavior.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.16.1
  title: ""
  date: 2023-08-09T18:44:38.890Z
- commits:
    - subject: Add instruction serialization with toJSON
      hash: bb4831de5f1a162dc9c4117b6f2ad0c8fd5ee33c
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Formalize the plan trace interface
      hash: 4f4b909643f2c79de237d3e1ffc08d6789ecaddc
      body: |
        Events happening during the planning process (next iteration, try
        instruction, condition failed, etc.) are now defined as specific types
        with accompanying data. These events can be organized as a state
        machine, which means trace functions can use the state machine to
        identify where in the process an event happens, and use that
        information, for instance, to create visualizations of the decision
        tree.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.16.0
  title: ""
  date: 2023-08-09T18:17:00.138Z
- commits:
    - subject: Expose planner API via mahler/planner
      hash: c299fcb2e025cbd70a59b7cfa343b83a31dbc29d
      body: |
        This also removes the export for planner functionality
        on the top level. Use of `Planner` object should be generally rare and
        limited to testing. Exposing the planner API via a namespace makes that
        more evident.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Move Plan types to planner/plan.ts
      hash: 7a217ff034f625ae23d6e0964e88693a0dfb6470
      body: |
        This allows to centralize how a Node is created and the id is generated
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.15.0
  title: ""
  date: 2023-08-09T17:14:58.589Z
- commits:
    - subject: Do not generate hash for Instruction id
      hash: 0c2ddd772679d4eab274668976efd53032d07bcb
      body: >
        This is unnecessary as what needs to be compared are plan nodes rather
        than

        instructions.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Use a linked list to represent a Plan
      hash: 638ebceda06ed31f2200aea27b301be831420412
      body: |
        This should make it easier to convert the plan to a DAG
        as a linked list is a particular case of that data structure.

        This should also result in slightly better memory usage as it
        avoids copying the plan array multiple times.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Rename tsconfig paths for more clarity
      hash: 8068373e25ba9fc84d57babde19d4e86c89b9995
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Create testing namespace to put test related utils
      hash: 4e5c0af6c95bab494d857e69bd6314f7df46d0ce
      body: |
        This also adds a way to create a plan representation using
        a builder pattern. This will become more useful when we need to test
        the plan generated when using parallel tasks.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Add `path` and `target` to instructions
      hash: ebc8b9ec6c48e1db1a6472786d4d67de1b925cf1
      body: |
        Currently we calculate the action id using a hashing function from the
        path, target and task id. This is not really useful as in reality what
        we need to compare are applications of an action to a specific state.

        The planner is doing that comparison at the moment by comparing the
        actual state objects, which is a slow operation. It should really
        compare ids generated from the action metadata and the state.

        This is a first step towards that.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.14.0
  title: ""
  date: 2023-07-17T02:05:01.894Z
- commits:
    - subject: Improve planner loop detection
      hash: 5f718cc040000e07c0b27906ed8d7e5931a7298d
      body: |
        The planner would skip any action that was already added to the plan,
        however this would prevent repeat actions that modify the state
        incrementally. The planner now skips an action if it has been used
        before for the same state.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.13.2
  title: ""
  date: 2023-07-10T03:04:57.456Z
- commits:
    - subject: Allow action tasks to return an Observable
      hash: 19f6a437a037db1a3ae4fd9617bb11c2bc514bb8
      body: |
        This allow long running tasks (e.g. downloading a large file) to report
        intermediate progress of the operation (e.g. download progress) that the
        agent can report to its subscribers.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.13.1
  title: ""
  date: 2023-07-08T00:53:50.187Z
- commits:
    - subject: Remove RedirectTask
      hash: 2ac6052b4003dbb44d63d60d6a1b2c9e5e60aaf3
      body: |
        While a redirect task is not a bad concept, it is really not necessary
        as creatively made methods will achieve the same thing without too much
        code overhead. Redirect tasks also get in the way of some planned
        improvements like parallel tasks and task lensing as I anticipate they
        will only make implementation harder.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Remove `id` from valid task creation arguments
      hash: 8a63a8ca14ff2a0aba513b65d1f0c21747c0fdd7
      body: |
        There is no real benefit on allowing users to set task ids and it adds
        the risk of messing with planning.

        Removing also makes it unnecessary to check for duplicates.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.13.0
  title: ""
  date: 2023-07-08T00:00:23.401Z
- commits:
    - subject: Remove the need for async `seek()` method in Agent
      hash: f05b7d1cb1cb59fc1622241085495ee602909a7e
      body: |
        This makes the API simpler an more intuitive.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Make Agent into an Observable
      hash: bd8eebe9aa7bfd5e76872fffb55da1446593dea2
      body: |
        This allows other services to be notified of changes in the state.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Refactor agent runtime
      hash: 84fa0251aa9c675ff718b46931e62eda7c980802
      body: |
        Organize and cleanup code
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Simplify the Agent interface
      hash: 706c75ea4d3632f32c935e1583a993702afa6f85
      body: |
        This removes the `start` and `target` methods and replaces them with
        a `seek`, that will cancel any running executions before starting the
        search for a new plan.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Simplify observable implementation
      hash: 6fd81f905ea6bda168206cec57ea3ebe0158245b
      body: |
        The implementation is now more consistent with typical observable
        definitions.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Move `equals` json helper outside of diff
      hash: c0f130c29071a398dbe84e5dd39eaba3d2f4c040
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Remove the `wait` function from observable
      hash: eedd1de0310352a34246cdd8d39bc2476f930124
      body: |
        Although it might be nice to have in some cases, it  is not really
        used by the agent and it makes Observable definition more complex
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Remove callable syntax from Observable
      hash: cc9900852d3edfe390ae5d6397a3bb192b2cb0e7
      body: |
        It really is not necessary and it really just makes creating observables
        from classes much harder
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.12.0
  title: ""
  date: 2023-07-07T23:03:23.133Z
- commits:
    - subject: Improve 'Initializer' helper task
      hash: aa5fc245a8e07e8abbdba3e3c41e96b34fd50d70
      body: |
        Renames the 'Constructor' task to 'Initializer' and improves the
        interface to make it more intuitive what the task does.

        This also adds a `Disposer` helper task that allows cleaning up the
        state to remove properties that are no longer needed.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Create NoOp helper
      hash: 0d6922cd4f7f170d11112be12c79167a1003c9dc
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Allow returning single task from method
      hash: 5ecf86575fc95b4c9a1a568c44abb360b53b1f08
      body: |
        Method tasks can now return a single tasks or an array.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Improve default description for tasks
      hash: 04b2927412e97bff70f5b2d97326bfae8d4b8176
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Add `path` property to Context type
      hash: 76fe6b0243267a7f3393e067a52d0535b47172a9
      body: |
        This also improves readability for the `Context` type.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Refactor task module
      hash: 14e99ad3cf05bdd5abe49485d7f265fe123a3a1f
      body: |
        Split the previous `task.ts` into multiple files for better readability
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Move task.ts to task/index.ts
      hash: 834c0ef74ebd6435bc2b05b2af4fceff3afbde53
      body: |
        First step to break up task
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.11.0
  title: ""
  date: 2023-06-23T16:53:19.301Z
- commits:
    - subject: Add orchestrator test using redirect task
      hash: ece0c364d628a28085f7891c5f03e68bef3d390f
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Add support for redirect tasks
      hash: 2046945f24eb2946e10ef55054724379a0ba7568
      body: >
        A redirect task allows to define one or more targets for the planner to
        seek when

        receiving a target. For instance, if the agent is a robot that

        needs to get from A -> B but there is an obstacle in the path, then the

        task could identify the obstacle and tell the planner to go from A -> C

        and then from C -> B in order to reach the target.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.10.0
  title: ""
  date: 2023-06-22T21:43:21.578Z
- commits:
    - subject: Refactor planner module
      hash: 80cc80867ba124954ae5756f4dfe14d38820c2ab
      body: |
        This splits up the `planner.ts` module into multiple files under
        `lib/planner`, it also renames some methods, properties for better
        readability.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Move lib/planner.ts to lib/planner/index.ts
      hash: 304768ebbc4a2db57a75741c7c6af1e075e54443
      body: |
        This is the first step in refactoring the planner
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Remove extractPath utility function from planner
      hash: 61ddf5da9ad4d743b40c4ef125789f831552d9c8
      body: >
        The function was leftover from before improving the [diff
        calculation](https://github.com/balena-io-modules/mahler/commit/3682d3c6e39f4c9b97fd287565ca609803af12fb).
        The function is no longer needed.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.9.3
  title: ""
  date: 2023-06-22T15:12:00.795Z
- commits:
    - subject: Add service migration task to orchestrator example
      hash: c493fb9f1bee1d7cd50874442f1b55d1345fe943
      body: |
        This adds a new task to handle the case where a service has not changed
        between the current and target release. In this case the orchestrator
        should just rename the container and do nothing else
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.9.2
  title: ""
  date: 2023-06-19T23:02:50.035Z
- commits:
    - subject: Add usage information to README files
      hash: fc4f1d0b184200bff9305a7f0cf5d7a8f971c45c
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.9.1
  title: ""
  date: 2023-06-19T22:00:25.024Z
- commits:
    - subject: Add some documentation for examples under tests/
      hash: c24319e9d3d06fc2dd5e6379f729056032844723
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Add release update to agent tests
      hash: 7ce747fa3a38201393fa11b99885450e8de4d1e5
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Make Task context aware of the operation
      hash: 115d61c90a6d6a0820d4e61f0ae1e63c5d86bb41
      body: |
        Tasks declared for a `delete` operation no longer receive a `target`
        property, since it does not make sense with the way delete operation
        works. This also makes it simpler to call delete tasks as less data
        needs to be passed to the grounding function.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Add `del()` function to context
      hash: 579df5870471c3c932da1beacd6e987154da6276
      body: |
        This allows to remove the element referenced by the path.

        It is useful for modifying the state of a deeply nested value.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Add orchestrator example/integration tests
      hash: 24dc1a524b7aaa8a6f6ddfb3c5ca3f095d126bfd
      body: |
        This will provide an example of release management using HTN
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Create utility tasks for operating on state
      hash: 627cb8f11c54acbb2ec0356549a6ba3beb5fd3f2
      body: |
        This creates some utility tasks to perform some common operations in
        the state of the system.

        - A `NoOp` task can be used for debugging under some conditions
        - A `Pure` task is a task that only performs transforms on the local
          state without affecting the system (e.g. a cleanup)
        - A `Constructor` task is used for initializing an element of the state
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Improve diff calculation to return all possible ops
      hash: 3682d3c6e39f4c9b97fd287565ca609803af12fb
      body: |
        A change in a deep property of a state object implies
        some operations on the object hierarchy, for instance a `delete` of a
        key `/a/b/c/d`, implies an `update` operation on `/`, `/a`, `/a/b` and
        `/a/b/c/d`, this means that any task defined for one of these paths is
        applicable to the operation.

        This change updates the `Diff` implementation so it generates all
        possible combination of changes
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Improve Action/Method interfaces to be callable
      hash: b005e933b5d1c079a2ef59e3ac330f43f326ecc2
      body: |
        This makes the interface more consistent with ActionTask/MethodTasks and
        provides better usability for testing.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Improve task types for testing
      hash: 1617fe2cf055eb516d71a6fb15d3c69e96061e0f
      body: |
        Task.of now returns the proper type (MethodTask or ActionTask) depending
        on the input. This makes it easier to use these types as part of
        testing. However, this comes with the tradeoff that tasks need to at
        least defined an `effect` property or a `method` property to be type
        checked correctly.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Split composer tests into multiple files
      hash: e8dd4018394d67baf6bbbfb544d5ded4075aed65
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.9.0
  title: ""
  date: 2023-06-19T21:19:54.054Z
- commits:
    - subject: Remove tests from build
      hash: 20ff3dbea6dc84d48289e3ad5f676d0f3e6d3f4a
      body: |
        Fix package build by removing tests. Before the package would be
        unusable as the configuration in `package.json` would not match the
        build folder structure.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.8.1
  title: ""
  date: 2023-06-09T19:34:38.664Z
- commits:
    - subject: Refactor Diff interface
      hash: 89e8401dae78fa5339944c3bf7083146f80c07d7
      body: >
        Creating a new instance with `Diff.of` will now return a function to

        calculate pending operations. This removes the public `patch` function as that

        is not used by the planner and that is replaced by a readonly property

        returning the result of patching a source object with the provided target.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.8.0
  title: ""
  date: 2023-05-10T22:10:21.013Z
- commits:
    - subject: Refactor agent, split into multiple files
      hash: c96373e2ddcc06ac40aa3256f682667beab1bde0
      body: |
        This moves the runtime behavior of the agent to a `Runtime` class, now
        under `lib/agent/runtime.ts`, making the code easier to read. The agent
        interface definition is now under `lib/agent/index.ts`

        This also modifies the behavior of the agent from polling to being
        influenced by sensors. Configuring an agent with `follow` true, means
        that new state changes coming from sensors will trigger re-plans to
        check if the state has gone off-target.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.7.0
  title: ""
  date: 2023-05-09T15:56:29.374Z
- commits:
    - subject: Make task description default to the id
      hash: 65a5962d02648e1e725320d737e1288abe8ffe9e
      body: |
        Also add some additional loging in unit tests.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Simplify task interface and remove unused code
      hash: 30687ff9cb1164501d25c57cd154e95058fd083a
      body: |
        This removes path and target from `Instance` interface in `task.ts` in
        favour of comparing by an id generated as a sha256 hash of the grounded
        task info. This simplifies the interface and makes comparison easier,
        removing the need for the `json.ts` utils module
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.6.0
  title: ""
  date: 2023-05-05T23:34:56.128Z
- commits:
    - subject: Allow providing a planner instance to Agent init
      hash: 7b7a7685488dc74ea7c2af8df343c1572f0cebf1
      body: |
        This allows custom planners to be given to an agent instance.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.5.0
  title: ""
  date: 2023-05-05T22:11:30.730Z
- commits:
    - subject: Improve plan search trace logic
      hash: 0c84a620f554d8d170bd5512df79102122f3e16a
      body: |
        Trace is now given an object with the state of the search. Loggers are
        welcome to parse the object as they see fit.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Refactor findPlan function of planne for readability
      hash: bd76a0e2d6e5157fc475f0a7d7db59570fb3c46b
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Refactor planner to return a result object
      hash: cab7ca51f7d4dbe143b238ca54a6a879b9796c87
      body: |
        The object now also returns planner stats, which can be used
        to benchmark changes in the knowledge based
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Rename Planner.plan to Planner.find
      hash: 3b6b2a9c5f7d2f4f8773949dad18413e6cf41060
      body: ""
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Make debug module a dev dependency
      hash: e1209d5773b5f7047708a5d687c1e4b4186099c1
      body: |
        Agent now receives a partial logger, where missing functions will be
        replaced by the defaults in NullLogger. The debug module is only used
        for tests
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Simplify PlanNotFound error
      hash: cf6505d2d259f9c6cc6226fabba9a79d7f4bed8c
      body: |
        Remove the `unnapplied` property as it wasn't that useful.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Allow passing a debugging function to the planner
      hash: 55b22a7eb6390291a8e61a9166d780faac60aef2
      body: |
        This allows to debug the plan search during development and identify
        bugs in the task definitions
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.4.0
  title: ""
  date: 2023-05-05T19:55:31.113Z
- commits:
    - subject: Change '*' to 'update' as default task operation
      hash: 8bd9f3a49f6c5289529d07555c38ee30984118f1
      body: |
        After creating the applicability table between tasks and state
        operations, it became clear that these two values had the same effect,
        so '*' was removed for simplicity
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 0.3.0
  title: ""
  date: 2023-04-29T17:37:55.595Z
- commits:
    - subject: Add updating tasks to container composer tests
      hash: fc4f66364b2dd37fa2496bf8c3d3fa844f067ec5
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Add debugging to planning function
      hash: 266cc987f292d27fe60d7425686786196116f1da
      body: |
        This helps debug reasons for planning failure
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Calculate the target before planning
      hash: 95167c187444815866dd199ca11b741e1e5a7e54
      body: |
        The target state was being calculated at each planning state, allowing
        effects to leech into next iterations of the plan via the target.

        This now calculates the target state only at the beginning, when the
        current state comes from the actual system state. While this is still
        not perfect, as the target may end up containing stuff that we really
        might not want in the final state (think a container re-start, where
        we don't care about the final containerId), the target at least is
        calculated from real data
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Split service tasks into install and start
      hash: 3891cf7f209d5743b015cb78558b6324839aafc8
      body: |
        This allows to handle more granular scenarios, for instance, that the
        service stopped on error and we want it to be restarted.
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Rename docker-compose test to container-compose
      hash: f61c4ed63a4da024bae52ae12bf5b3599ba3a35d
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.2.0
  title: ""
  date: 2023-04-29T00:59:58.877Z
- commits:
    - subject: Add service to docker-compose to enable flowzone testing
      hash: 8422902ede14e359c4394ef27083325ed2b13172
      body: |
        Also set the logging level for tests
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Move default logger to its own module
      hash: 1f3a0914665fcdd0d6fd9679ffa94d36cfa6f851
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
    - subject: Setup flowzone
      hash: 6962d09ab00e6f191c3eeec535450d996f336ed7
      body: |
        Set the change to minor so the first published version is 0.1.0
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
    - subject: Update package.json with repository metadata
      hash: 4fd6666505c812583d4732e357448b0d61b33db2
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 0.1.0
  title: ""
  date: 2023-04-24T22:22:00.390Z
